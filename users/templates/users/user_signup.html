{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>User Sign-Up</title>
  <style>/* ===== CSS Variables ===== */
    :root {
      --bg: linear-gradient(0deg, #e5fdf3, #e7edfe, #ffecf8);
      --card-bg: rgba(255, 255, 255, 0.55);
      --input-bg: rgba(255, 255, 255, 0.4); /* 40% opacity */
      --muted: #777;
      --accent: #a9f2c9c1; /* green for success */
      --notice: #49ab73;
      --btn-login: #d88474;
      --orange: #f6a079;
      --dark-orange: #a66445;
      --danger: #ad2f2bd8;
      --light: #ffffff;
    }
    
    /* ===== Global Styles ===== */
    * {
      box-sizing: border-box;
    }
    
    html,
    body {
      height: 100%;
    }
    
    body {
      min-height: 100vh; /* Allows growing if content is tall */
      width: 100%;
      overflow-y: auto;
      margin: 0;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      display: flex;
      position: relative;
      cursor: default;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }

  body::before {
      content: "";
      position: fixed; /* This makes it stay in place */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1; /* Puts it behind your content */

      /* Your Image Settings */
      background-image: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.6)), url("{% static 'users/icons/pexels-farhad.jpg' %}");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      /* Hardware acceleration trick to stop shaking */
      will-change: transform;
}
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
    
      }
    }
    
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 0.6;
        transform: translateY(0);
      }
    }
    
    .container {
      display: flex;
      width: 100%;
      max-width: 920px;
      position: relative; /* needed for overlay */
      border-radius: 15px;
      -webkit-backdrop-filter: blur(6px) saturate(120%);
      backdrop-filter: blur(6px) saturate(120%);
      border-color: var(--orange) !important;
      box-shadow: 0 0 0 7px rgba(217, 83, 79, 0.1) !important;
    }
    
    .container, .section-greeting-img .box{ 
      border-radius: 15px; 
    }
    
    /* dark overlay so text is readable (70% darkness) */
    .container::before{
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 15px;
      background: rgba(0, 0, 0, 0.42);
      z-index: 0;
    }
    
    .section-greeting-img {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      padding: 28px;
      color: #fff;
      border-radius: 15px;
    }
    
    .section-greeting-img h1 {
      align-self: center;
      font-size: 40px;
      font-family: "Inter", sans-serif;
      margin: 0 0 8px 0;
      color: #fff;
    }
    
    .section-greeting-img h2 {
      align-self: center;
      font-family: "Inter", sans-serif;
      margin: 0;
      color: #fff;
    }
     
    .section-greeting-img{
      flex: 1.4;
    }
    .section-card{
      flex: 1.6;
    }
    
    input[type="checkbox"]{
      accent-color: var(--orange);
    }
    
    .section-greeting-img, .section-card{
      position: relative;
      z-index: 1;
    }
    
    .box {
      padding: 30px 35px;
      position: relative; 
      z-index: 1;
    }
    
    .section-greeting-img .box {
      border-radius: 12px;
    }
    
    .section-card {
      margin: 2.8px;
      background: rgba(248, 237, 230, 0.92);
      border-radius: 0 15px 15px 0;
    }
    .section-card h1 {
      margin: 0 0 10px 0;
      text-align: center;
      font-size: 28px;
      color: #494646;
    }

    .error-notice p {
      color: var(--danger); 
      font-size: 13px;
    }
    
    /* ===== Form Fields ===== */
    .field {
      margin-bottom: 16px;
    }
    
    .field .username {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    
        /* 1. Hide the default browser eye icon */
    input::-ms-reveal,
    input::-ms-clear {
        display: none;
    }

    /* 2. Style the password wrapper */
    .pw-wrap {
        position: relative;
        display: flex;
        align-items: center;
    }

    /* 3. Style the toggle button */
    .pw-toggle {
        position: absolute;
        right: 10px;
        background: transparent;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        padding: 0;
        z-index: 5;
    }

    .pw-toggle img {
        width: 20px; /* Adjust as needed */
        height: auto;
    }

    /* 4. Ensure input doesn't hide text under the icon */
    .pw-wrap input {
        padding-right: 40px;
        width: 100%;
    }
    .show-hide {
      z-index: 1000;
      border-radius: 50%;
      border: 2px solid var(--light);
      background: var(--light);
      animation: fadeInDown 2s ease-out 0.2s backwards;  
    }
    
    .show-hide:focus {
      transform: rotateX(0);
    }
    
    .show-hide:active {
      transition: transform 0.4s;
      transform: rotate(-180deg);
    }
    
    .visually-hidden { 
      position: absolute !important;
      height: 1px; 
      width: 1px;
      overflow: hidden;
      clip: rect(1px,1px,1px,1px);
      white-space: nowrap; 
      border: 0; 
      padding: 0; 
      margin: -1px; 
    }
    
    .field label {
      color: #312d2d;
      display: block;
      margin-bottom: 4px;
      font-size: 13.7px;
      font-weight: normal;
      animation: fadeInDown 0.7s ease-out 0.2s backwards;
    }
    
    .field input[type="text"],
    .field input[type="email"],
    .field input[type="password"],
    .field input[type="number"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 3px;
      border: 2px solid var(--light);
      background: var(--light);
      outline: none;
      cursor: pointer;
      font-size: 13px;
      font-family: "Inter", sans-serif;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px); 
      transition: ease 0.5s;
      animation: fadeInDown 2s ease-out 0.2s backwards;
    }
    
    .field input:focus, .field input:hover {
      background: var(--light);
      border-color: var(--orange);
      box-shadow: 0 0 0 5px rgba(246, 160, 121, 0.2);
    }
    
    .hint {
      display: block;
      margin-top: 6px;
      color: var(--muted);
      font-size: 11px;
    }
    
    select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 3px;
      border: 2px solid var(--accent);
      outline: none;
      border: 2px solid var(--light);
      background: var(--light);
      outline: none;
      cursor: pointer;
      font-family: "Inter", sans-serif;
      font-size: 14px;
      background: #f5f5f5;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      transition: ease 0.5s; 
    }
    select:hover,
    select:focus {
      background: var(--light);
      border-color: var(--orange);
      box-shadow: 0 0 0 5px rgba(246, 160, 121, 0.2);
    }

    .pw {
      cursor: pointer;
    }
    
    /* label icons (placed before the label text) */
    .label-icon{
      width: 16px;
      height: 16px;
      display: inline-block;
      vertical-align: middle;
      margin-right: 8px;
      margin-bottom: 4px;
    }

    
    /* ===== Checkbox Field ===== */
    .checkbox-field {
      display: flex;
      align-items: center;
      margin: 28px 0;
      gap: 10px;
    }
    
    #agree {
      cursor: pointer;
    }
    
    .checkbox-field .notice {
      color: var(--dark-orange);
    }
    
    .checkbox-field a {
      text-decoration: none;
      font-weight: normal;
      color: var(--dark-orange);
    }
    
    .checkbox-field input[type="checkbox"] {
      width: 16px;
      height: 16px;
    }
    
    /* ===== Buttons ===== */
    button[type="submit"] {
      width: 100%;
      padding: 12px 16px;
      border-radius: 10px;
      border: none;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      background: linear-gradient(180deg,var(--btn-login), #c9655a);
      color: #fff;
      transition: all 0.3s ease;
    }
    
    button[type="submit"]:hover {
      background: linear-gradient(180deg,var(--btn-login), #c9655a);
      border-color: var(--orange);
      box-shadow: 0 0 0 5px rgba(246, 160, 121, 0.2);
    }
    
    button[disabled] {
      opacity: 0.6;
      cursor: not-allowed;
      animation: slideInUp 0.6s ease-out 0.4s backwards;
    }
    
    .login-opt {
      display: flex;
      margin: 10px 0 0 0;
      justify-content: space-around;
    }
    
    .login-opt p {
      margin-left: 0;
      color: #000;
      font-size: 13px;
      font-weight: normal;
    }
    
    .login-opt a {
      text-decoration: none;
      color: var(--dark-orange);
      transition: transform 1s;
    }
    
    .login-opt .login {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 18px;
      font-weight: normal;
      text-align: center;
      align-content: center;
    }
    .login:hover {
      border-color: var(--orange);
      text-shadow: 5px rgba(246, 160, 121, 0.2);
    }
    
    .username .field {
      flex: 1;
    }
    
    /* ===== Three Column Layout ===== */
    .three-col {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
    }
    
    .three-col .field {
      flex: 1;
    }
    
    /* ===== Validation Classes ===== */
    
    .input-invalid {
      border-color: var(--danger) !important;
      box-shadow: 0 0 0 7px rgba(217, 83, 79, 0.1) !important;
    }

.custom-select {
  position: relative;
  width: 100%;
  animation: fadeInDown 2s ease-out 0.2s backwards;
}

.select-trigger {
  padding: 8px 10px;
  background: var(--light);
  border: 2px solid var(--light);
  border-radius: 3px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
  animation: fadeInDown 2s ease-out 0.2s backwards;
  transition: all 0.3s ease;
}
.select-trigger:hover,
.select-trigger:hover {
      border-color: var(--orange);
      box-shadow: 0 0 0 5px rgba(246, 160, 121, 0.2);
    }
/* THE POPUP: position absolute means it won't move the page */
.options-popup {
  position: absolute;
  top: 100%; /* Appears right below the trigger */
  left: 0;
  right: 0;
  background: #ffffff;
  border-radius: 8px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); 
  z-index: 1000; 
  max-height: 200px;
  overflow-y: auto;
  
  /* Hidden by default */
  opacity: 0;
  visibility: hidden;
  transform: translateY(-5px);
  transition: all 0.2s ease-in-out;
}

.custom-select.open .options-popup {
  opacity: 1;
  visibility: visible;
  transform: translateY(2px);
}

.option {
  padding: 10px 15px;
  font-size: 13px;
  cursor: pointer;
  border-bottom: 1px solid #f1f1f1;
  color: #333;
}

.option:hover {
  background: rgba(246, 160, 121, 0.1);
  color: var(--dark-orange);
}

/* Valid styling for custom select */
.custom-select.input-valid .select-trigger {
  border-color: var(--orange) !important;
}    

  @media (max-height: 900px) {
  html, 
  body {
    min-height: 100vh;
    height: auto;
  }
  
  body {
    background-image: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.6)), url('pexels-farhad.jpg');
    padding: 12px; 
    align-items: center;
    
    justify-content: center;
  }

  /* Resize container */
  .container { 
    max-width: 880px;
    min-height: 450px; 
  }

  /* Greeting section */
  .section-greeting-img {
    padding: 15px;
    font-size: 0.9rem;
    flex: 1; 
  }
  a {
      text-decoration: none;
      text-align: center;
      align-self: center;
      justify-self: center;
    }

  /* Card section */
  .section-card {
    padding: 18px 25px;
    flex: 1; 
    border-radius: 12px;
  }

  /* Inputs resize */
  .field input[type="text"],
  .field input[type="email"],
  .field input[type="password"],
  .field input[type="number"] {
    padding: 10px 12px;
    font-size: 12px;
  }

  select {
    padding: 8px 10px;
    font-size: 12px;
  }

  button[type="submit"] {
    padding: 10px;
    font-size: 14px;
  }

  .label-icon {
    width: 14px;
    height: 14px;
  }
}

    @media (max-width: 900px) {
    html,
    body {
      min-height: 100vh;
      height: auto;
    }
    
      body {
        background-image: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.6)), url('pexels-farhad.jpg');
        padding: 24px;
        align-items: flex-start;
        overflow: scroll;
      }
      /* stack sections vertically and let the background show through */
      .container { 
        flex-direction: column; 
        max-width: 600px; 
      }
      .container::before { 
        background: rgba(0,0,0,0.18); 
      }
      
      .section-greeting-img { 
        border-radius: 15px 15px 0 0; 
        padding: 20px; 
        background-position-y: bottom;
      }
      .section-card { 
        border-radius: 15px; 
        margin-top: -12px; 
        background: rgba(248, 237, 230, 0.92); 
      }
      
      /* move the welcome message up slightly and keep it visible */
      .section-greeting-img h1 { 
        transform: translateY(-8px); 
        font-size: 28px; 
      }
      .section-greeting-img h2 { 
        transform: translateY(-4px); 
        font-size: 15px; 
      }
    
      .two-col { 
        display: block; 
      }
      .username { 
        grid-template-columns: 1fr; 
      }
    }
    
    @media (max-width: 420px) {
      html,
    body {
      min-height: 100vh;
    }
    
      body{
        margin: 0;
        padding: 0;
        overflow: scroll;
      }
      .container {
        margin: 15% 0 0 0;
        -webkit-backdrop-filter: blur(2px) saturate(120%);
        backdrop-filter: blur(2px) saturate(120%);
      }
      
      .container::before{
        content: '';
        background: rgba(0, 0, 0, 0.237);
        z-index: 0;
      }
    
      .box {
        padding: 30px 35px;
        -webkit-backdrop-filter: blur(1px);
        backdrop-filter: blur(1px);
      }
      
      .section-greeting-img h1 { 
        font-size: 25px;
      }
      .section-greeting-img h2 { 
        font-size: 18px; 
      }
      .section-card {  
        margin: 0;
        padding: 18px 18px 28px 18px; 
        border-radius: 15px 15px 0 0;
        border-color: transparent !important;
        box-shadow: none !important;
      }
      
     .field label {
        font-size: 12.7px;
     }
      
     .field input[type="text"],
     .field input[type="email"],
     .field input[type="password"],
     .field input[type="number"] {
       padding: 10px 12px;
       font-size: 13px;
     }
     select {
      padding: 12px 14px;
    }
     .pw-toggle img { 
       width: 15px; 
       height: 15px; 
     }
     .label-icon{
       width: 16px;
       height: 16px;
     }
    
    }
    </style>
</head>
<body>
  <main class="container">
    <div class="section-greeting-img box">
      <h1>HI, Welcome !</h1>
  <h2>Sign Up to get Started</h2>
    </div>
    <div class="section-card box">
      <form id="signupForm" method="POST" action="{% url 'user-signup' %}" novalidate>
        {% csrf_token %} <h1> Sign Up</h1>

      {% if form.errors %}
        <div class="error-notice">
           <p>Please fix the errors below.</p>
        </div>
      {% endif %}  

      <div class="row two-col">
        <div class="field">
          <label for="firstName"><img class="label-icon" src="{% static 'users/icons/user.svg' %}" alt="">Username</label>
          <div class="username">
            <input id="firstName" name="first_name" type="text" placeholder="First name" required autocomplete="given-name" value="{{ form.first_name.value|default:'' }}"/>
            <input id="lastName" name="last_name" type="text" placeholder="Last name" required autocomplete="family-name" value="{{ form.last_name.value|default:'' }}"/>
          </div>
          {{ form.first_name.errors }}
        </div>
      </div>

      <div class="field">
        <label for="username"><img class="label-icon" src="{% static 'users/icons/user.svg' %}" alt="">Username</label>
        <input id="username" name="username" type="text" placeholder="Choose a unique username" required autocomplete="username" value="{{ form.username.value|default:'' }}"/>
        {{ form.username.errors }}
      </div>

      <div class="field">
        <label for="email"><img class="label-icon" src="{% static 'users/icons/mail.png' %}" alt="">Email</label>
        <input id="email" name="email" type="email" placeholder="Enter a valid email" required autocomplete="email" value="{{ form.email.value|default:'' }}"/>
        {{ form.email.errors }}
      </div>

      <div class="field">
        <label for="password"><img class="label-icon" src="{% static 'users/icons/locked-computer.png' %}" alt="">Password</label>
        <div class="pw-wrap">
          <input id="password" name="password1" type="password" placeholder="Enter your password" autocomplete="new-password" required />
          <button type="button" class="pw-toggle" aria-label="Show password">
            <img src="{% static 'users/icons/view.png' %}" class="show-hide" alt="Show"/>
            <span class="visually-hidden">Show password</span>
          </button>
        </div>
        <small class="hint pw">Password length must be &gt; 6 and &lt; 23 characters.</small>
        {{ form.password1.errors }}
      </div>

      <div class="field">
        <label for="confirm"><img class="label-icon" src="{% static 'users/icons/locked-computer.png' %}" alt="">Confirm password</label>
        <div class="pw-wrap">
          <input id="confirm" name="password2" type="password" placeholder="Re-enter your password" autocomplete="new-password" required />
          <button type="button" class="pw-toggle" aria-label="Show confirm password">
            <img src="{% static 'users/icons/view.png' %}" class="show-hide" alt="Show"/>
            <span class="visually-hidden">Show confirm password</span>
          </button>
        </div>
      </div>
       
      <div class="field"> 
        <label class="margin-top-12"><img class="label-icon" src="{% static 'users/icons/citizenship.png' %}" alt="">Country</label>
        <div class="custom-select" id="customCountry">
          <div class="select-trigger">
            <span>Select country</span>
            <div class="arrow"></div>
          </div>
          <div class="options-popup">
            <div class="option" data-value="AF">Afghanistan</div>
            <div class="option" data-value="AL">Albania</div>
            <div class="option" data-value="DZ">Algeria</div>
            <div class="option" data-value="AS">American Samoa</div>
            <div class="option" data-value="AD">Andorra</div>
            <div class="option" data-value="AO">Angola</div>
            <div class="option" data-value="AI">Anguilla</div>
            <div class="option" data-value="AQ">Antarctica</div>
            <div class="option" data-value="AG">Antigua and Barbuda</div>
            <div class="option" data-value="AR">Argentina</div>
            <div class="option" data-value="AM">Armenia</div>
            <div class="option" data-value="AW">Aruba</div>
            <div class="option" data-value="AU">Australia</div>
            <div class="option" data-value="AT">Austria</div>
            <div class="option" data-value="AZ">Azerbaijan</div>
            <div class="option" data-value="BS">Bahamas</div>
            <div class="option" data-value="BH">Bahrain</div>
            <div class="option" data-value="BD">Bangladesh</div>
            <div class="option" data-value="BB">Barbados</div>
            <div class="option" data-value="BY">Belarus</div>
            <div class="option" data-value="BE">Belgium</div>
            <div class="option" data-value="BZ">Belize</div>
            <div class="option" data-value="BJ">Benin</div>
            <div class="option" data-value="BM">Bermuda</div>
            <div class="option" data-value="BT">Bhutan</div>
            <div class="option" data-value="BO">Bolivia</div>
            <div class="option" data-value="BA">Bosnia and Herzegovina</div>
            <div class="option" data-value="BW">Botswana</div>
            <div class="option" data-value="BR">Brazil</div>
            <div class="option" data-value="BN">Brunei Darussalam</div>
            <div class="option" data-value="BG">Bulgaria</div>
            <div class="option" data-value="BF">Burkina Faso</div>
            <div class="option" data-value="BI">Burundi</div>
            <div class="option" data-value="CV">Cabo Verde</div>
            <div class="option" data-value="KH">Cambodia</div>
            <div class="option" data-value="CM">Cameroon</div>
            <div class="option" data-value="CA">Canada</div>
            <div class="option" data-value="KY">Cayman Islands</div>
            <div class="option" data-value="CF">Central African Republic</div>
            <div class="option" data-value="TD">Chad</div>
            <div class="option" data-value="CL">Chile</div>
            <div class="option" data-value="CN">China</div>
            <div class="option" data-value="CO">Colombia</div>
            <div class="option" data-value="KM">Comoros</div>
            <div class="option" data-value="CG">Congo</div>
            <div class="option" data-value="CD">Congo, Democratic Republic of the</div>
            <div class="option" data-value="CK">Cook Islands</div>
            <div class="option" data-value="CR">Costa Rica</div>
            <div class="option" data-value="CI">CÃ´te d'Ivoire</div>
            <div class="option" data-value="HR">Croatia</div>
            <div class="option" data-value="CU">Cuba</div>
            <div class="option" data-value="CY">Cyprus</div>
            <div class="option" data-value="CZ">Czechia</div>
            <div class="option" data-value="DK">Denmark</div>
            <div class="option" data-value="DJ">Djibouti</div>
            <div class="option" data-value="DM">Dominica</div>
            <div class="option" data-value="DO">Dominican Republic</div>
            <div class="option" data-value="EC">Ecuador</div>
            <div class="option" data-value="EG">Egypt</div>
            <div class="option" data-value="SV">El Salvador</div>
            <div class="option" data-value="GQ">Equatorial Guinea</div>
            <div class="option" data-value="ER">Eritrea</div>
            <div class="option" data-value="EE">Estonia</div>
            <div class="option" data-value="SZ">Eswatini</div>
            <div class="option" data-value="ET">Ethiopia</div>
            <div class="option" data-value="FJ">Fiji</div>
            <div class="option" data-value="FI">Finland</div>
            <div class="option" data-value="FR">France</div>
            <div class="option" data-value="GA">Gabon</div>
            <div class="option" data-value="GM">Gambia</div>
            <div class="option" data-value="GE">Georgia</div>
            <div class="option" data-value="DE">Germany</div>
            <div class="option" data-value="GH">Ghana</div>
            <div class="option" data-value="GR">Greece</div>
            <div class="option" data-value="GD">Grenada</div>
            <div class="option" data-value="GU">Guam</div>
            <div class="option" data-value="GT">Guatemala</div>
            <div class="option" data-value="GN">Guinea</div>
            <div class="option" data-value="GW">Guinea-Bissau</div>
            <div class="option" data-value="GY">Guyana</div>
            <div class="option" data-value="HT">Haiti</div>
            <div class="option" data-value="HN">Honduras</div>
            <div class="option" data-value="HK">Hong Kong</div>
            <div class="option" data-value="HU">Hungary</div>
            <div class="option" data-value="IS">Iceland</div>
            <div class="option" data-value="IN">India</div>
            <div class="option" data-value="ID">Indonesia</div>
            <div class="option" data-value="IR">Iran</div>
            <div class="option" data-value="IQ">Iraq</div>
            <div class="option" data-value="IE">Ireland</div>
            <div class="option" data-value="IL">Israel</div>
            <div class="option" data-value="IT">Italy</div>
            <div class="option" data-value="JM">Jamaica</div>
            <div class="option" data-value="JP">Japan</div>
            <div class="option" data-value="JO">Jordan</div>
            <div class="option" data-value="KZ">Kazakhstan</div>
            <div class="option" data-value="KE">Kenya</div>
            <div class="option" data-value="KI">Kiribati</div>
            <div class="option" data-value="KP">Korea, North</div>
            <div class="option" data-value="KR">Korea, South</div>
            <div class="option" data-value="KW">Kuwait</div>
            <div class="option" data-value="KG">Kyrgyzstan</div>
            <div class="option" data-value="LA">Laos</div>
            <div class="option" data-value="LV">Latvia</div>
            <div class="option" data-value="LB">Lebanon</div>
            <div class="option" data-value="LS">Lesotho</div>
            <div class="option" data-value="LR">Liberia</div>
            <div class="option" data-value="LY">Libya</div>
            <div class="option" data-value="LI">Liechtenstein</div>
            <div class="option" data-value="LT">Lithuania</div>
            <div class="option" data-value="LU">Luxembourg</div>
            <div class="option" data-value="MO">Macao</div>
            <div class="option" data-value="MG">Madagascar</div>
            <div class="option" data-value="MW">Malawi</div>
            <div class="option" data-value="MY">Malaysia</div>
            <div class="option" data-value="MV">Maldives</div>
            <div class="option" data-value="ML">Mali</div>
            <div class="option" data-value="MT">Malta</div>
            <div class="option" data-value="MH">Marshall Islands</div>
            <div class="option" data-value="MR">Mauritania</div>
            <div class="option" data-value="MU">Mauritius</div>
            <div class="option" data-value="MX">Mexico</div>
            <div class="option" data-value="FM">Micronesia</div>
            <div class="option" data-value="MD">Moldova</div>
            <div class="option" data-value="MC">Monaco</div>
            <div class="option" data-value="MN">Mongolia</div>
            <div class="option" data-value="ME">Montenegro</div>
            <div class="option" data-value="MA">Morocco</div>
            <div class="option" data-value="MZ">Mozambique</div>
            <div class="option" data-value="MM">Myanmar</div>
            <div class="option" data-value="NA">Namibia</div>
            <div class="option" data-value="NR">Nauru</div>
            <div class="option" data-value="NP">Nepal</div>
            <div class="option" data-value="NL">Netherlands</div>
            <div class="option" data-value="NZ">New Zealand</div>
            <div class="option" data-value="NI">Nicaragua</div>
            <div class="option" data-value="NE">Niger</div>
            <div class="option" data-value="NG">Nigeria</div>
            <div class="option" data-value="MK">North Macedonia</div>
            <div class="option" data-value="NO">Norway</div>
            <div class="option" data-value="OM">Oman</div>
            <div class="option" data-value="PK">Pakistan</div>
            <div class="option" data-value="PW">Palau</div>
            <div class="option" data-value="PS">Palestine</div>
            <div class="option" data-value="PA">Panama</div>
            <div class="option" data-value="PG">Papua New Guinea</div>
            <div class="option" data-value="PY">Paraguay</div>
            <div class="option" data-value="PE">Peru</div>
            <div class="option" data-value="PH">Philippines</div>
            <div class="option" data-value="PL">Poland</div>
            <div class="option" data-value="PT">Portugal</div>
            <div class="option" data-value="PR">Puerto Rico</div>
            <div class="option" data-value="QA">Qatar</div>
            <div class="option" data-value="RO">Romania</div>
            <div class="option" data-value="RU">Russia</div>
            <div class="option" data-value="RW">Rwanda</div>
            <div class="option" data-value="KN">Saint Kitts and Nevis</div>
            <div class="option" data-value="LC">Saint Lucia</div>
            <div class="option" data-value="VC">Saint Vincent and the Grenadines</div>
            <div class="option" data-value="WS">Samoa</div>
            <div class="option" data-value="SM">San Marino</div>
            <div class="option" data-value="ST">Sao Tome and Principe</div>
            <div class="option" data-value="SA">Saudi Arabia</div>
            <div class="option" data-value="SN">Senegal</div>
            <div class="option" data-value="RS">Serbia</div>
            <div class="option" data-value="SC">Seychelles</div>
            <div class="option" data-value="SL">Sierra Leone</div>
            <div class="option" data-value="SG">Singapore</div>
            <div class="option" data-value="SK">Slovakia</div>
            <div class="option" data-value="SI">Slovenia</div>
            <div class="option" data-value="SB">Solomon Islands</div>
            <div class="option" data-value="SO">Somalia</div>
            <div class="option" data-value="ZA">South Africa</div>
            <div class="option" data-value="SS">South Sudan</div>
            <div class="option" data-value="ES">Spain</div>
            <div class="option" data-value="LK">Sri Lanka</div>
            <div class="option" data-value="SD">Sudan</div>
            <div class="option" data-value="SR">Suriname</div>
            <div class="option" data-value="SE">Sweden</div>
            <div class="option" data-value="CH">Switzerland</div>
            <div class="option" data-value="SY">Syria</div>
            <div class="option" data-value="TW">Taiwan</div>
            <div class="option" data-value="TJ">Tajikistan</div>
            <div class="option" data-value="TZ">Tanzania</div>
            <div class="option" data-value="TH">Thailand</div>
            <div class="option" data-value="TL">Timor-Leste</div>
            <div class="option" data-value="TG">Togo</div>
            <div class="option" data-value="TO">Tonga</div>
            <div class="option" data-value="TT">Trinidad and Tobago</div>
            <div class="option" data-value="TN">Tunisia</div>
            <div class="option" data-value="TR">Turkey</div>
            <div class="option" data-value="TM">Turkmenistan</div>
            <div class="option" data-value="TV">Tuvalu</div>
            <div class="option" data-value="UG">Uganda</div>
            <div class="option" data-value="UA">Ukraine</div>
            <div class="option" data-value="AE">United Arab Emirates</div>
            <div class="option" data-value="GB">United Kingdom</div>
            <div class="option" data-value="US">United States</div>
            <div class="option" data-value="UY">Uruguay</div>
            <div class="option" data-value="UZ">Uzbekistan</div>
            <div class="option" data-value="VU">Vanuatu</div>
            <div class="option" data-value="VE">Venezuela</div>
            <div class="option" data-value="VN">Vietnam</div>
            <div class="option" data-value="EH">Western Sahara</div>
            <div class="option" data-value="YE">Yemen</div>
            <div class="option" data-value="ZM">Zambia</div>
            <div class="option" data-value="ZW">Zimbabwe</div>
          </div>

      
        <input type="hidden" id="country" name="country" value="">
      </div>
      <div class="field checkbox-field">
        <input id="agree" name="agree" type="checkbox" />
        <label for="agree">I agree to the <a href="{% url 'terms-user' %}" target="_blank" class="notice">Terms of Service</a> and <a href="{% url 'terms-user' %}" target="_blank" class="notice">Privacy Police</a></label>
      </div>

      <button id="createBtn" type="submit" disabled>Create account</button>

     <div class="login-opt">
       <p>Already have an account?</p>
       <a href="{% url 'login' %}" class="login">Login</a> 
     </div>
    </form>
    </div>
  </main>

  <script>
    const form = document.getElementById('signupForm');
    const firstName = document.getElementById('firstName');
    const lastName = document.getElementById('lastName');
    const username = document.getElementById('username'); 
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const confirm = document.getElementById('confirm');
    const agree = document.getElementById('agree');
    const createBtn = document.getElementById('createBtn');
    const hiddenCountryInput = document.getElementById('country');
    const customSelect = document.getElementById('customCountry');
    const trigger = customSelect.querySelector('.select-trigger');
    const options = customSelect.querySelectorAll('.option');
    
    // ===== PASSWORD VISIBILITY TOGGLES =====
    function initPasswordToggles() {
        const toggles = document.querySelectorAll('.pw-toggle');
        const viewSrc = "{% static 'users/icons/view.png' %}";
        const hideSrc = "{% static 'users/icons/hide.png' %}";
    
        toggles.forEach(btn => {
            const input = btn.parentElement.querySelector('input');
            const img = btn.querySelector('img');
    
            btn.addEventListener('click', (e) => {
                e.preventDefault(); 
                const isPassword = input.type === 'password';
                input.type = isPassword ? 'text' : 'password';
                img.src = isPassword ? hideSrc : viewSrc;
                btn.setAttribute('aria-label', isPassword ? 'Hide password' : 'Show password');
            });
        });
    }
    
    // ===== VALIDATION HELPERS =====
    const setValid = (el) => { 
        el.classList.add('input-valid'); 
        el.classList.remove('input-invalid'); 
    };
    const setInvalid = (el) => { 
        el.classList.add('input-invalid'); 
        el.classList.remove('input-valid'); 
    };
    const setNeutral = (el) => { 
        el.classList.remove('input-invalid', 'input-valid'); 
    };
    
    function validateEmail() {
        const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const ok = regex.test(email.value);
        if (email.value.length === 0) return false;
        ok ? setValid(email) : setInvalid(email);
        return ok;
    }
    
    function validatePasswordLength() {
        const ok = password.value.length >= 6 && password.value.length <= 23;
        if (password.value.length === 0) return false;
        ok ? setValid(password) : setInvalid(password);
        return ok;
    }
    
    function validateConfirmMatch() {
        const ok = confirm.value === password.value && confirm.value.length > 0;
        if (confirm.value.length === 0) return false;
        ok ? setValid(confirm) : setInvalid(confirm);
        return ok;
    }
    
    function validateCountry() {
        const isSelected = hiddenCountryInput.value !== "";
        isSelected ? customSelect.classList.add('input-valid') : customSelect.classList.remove('input-valid');
        return isSelected;
    }
    
    // ===== CORE FORM VALIDITY CHECK =====
    function checkFormValidity() {
        const isFirstName = firstName.value.trim().length > 0;
        const isLastName = lastName.value.trim().length > 0;
        const isUsername = username.value.trim().length > 0;
        const isEmail = validateEmail();
        const isPass = validatePasswordLength();
        const isMatch = validateConfirmMatch();
        const isCountry = validateCountry();
        const isAgreed = agree.checked;
    
        const allValid = isFirstName && isLastName && isUsername && isEmail && isPass && isMatch && isCountry && isAgreed;
        createBtn.disabled = !allValid;
        return allValid;
    }
    
    // ===== EVENT LISTENERS =====
    
    trigger.addEventListener('click', (e) => {
        e.stopPropagation();
        customSelect.classList.toggle('open');
    });
    
    options.forEach(opt => {
        opt.addEventListener('click', () => {
            hiddenCountryInput.value = opt.getAttribute('data-value');
            trigger.querySelector('span').textContent = opt.textContent;
            customSelect.classList.remove('open');
            checkFormValidity();
        });
    });
    
    window.addEventListener('click', () => customSelect.classList.remove('open'));
    
    [firstName, lastName, username, email, password, confirm, agree].forEach(el => {
        const eventType = el.type === 'checkbox' ? 'change' : 'input';
        el.addEventListener(eventType, () => {
            if (![email, password, confirm].includes(el) && el.type !== 'checkbox') {
                el.value.trim().length > 0 ? setValid(el) : setNeutral(el);
            }
            checkFormValidity();
        });
    });
    
    // Navigation
    const fields = [firstName, lastName, username, email, password, confirm];
    fields.forEach((field, index) => {
        field.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                const next = fields[index + 1];
                if (next) next.focus();
            }
        });
    });
    
    // ===== DJANGO AJAX SUBMISSION =====
   form.addEventListener('submit', (event) => {
      
        if (!checkFormValidity()) {
            event.preventDefault();
            alert("Please complete the form correctly.");
        }
      
    });
    initPasswordToggles();
    checkFormValidity(); </script>
</body>
</html>
